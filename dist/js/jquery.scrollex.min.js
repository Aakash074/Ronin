!function(r){function h(t,e,n){return"string"==typeof t&&("%"==t.slice(-1)?t=parseInt(t.substring(0,t.length-1))/100*e:"vh"==t.slice(-2)?t=parseInt(t.substring(0,t.length-2))/100*n:"px"==t.slice(-2)&&(t=parseInt(t.substring(0,t.length-2)))),t}var c=r(window),a=1,u={};c.on("scroll",function(){var e=c.scrollTop();r.map(u,function(t){window.clearTimeout(t.timeoutId),t.timeoutId=window.setTimeout(function(){t.handler(e)},t.options.delay)})}).on("load",function(){c.trigger("scroll")}),jQuery.fn.scrollex=function(t){var e,n,i,o,l=r(this);if(0==this.length)return l;if(1<this.length){for(var s=0;s<this.length;s++)r(this[s]).scrollex(t);return l}if(l.data("_scrollexId"))return l;switch(e=a++,(n=jQuery.extend({top:0,bottom:0,delay:0,mode:"default",enter:null,leave:null,initialize:null,terminate:null,scroll:null},t)).mode){case"top":i=function(t,e,n,i,o){return i<=t&&t<=o};break;case"bottom":i=function(t,e,n,i,o){return i<=n&&n<=o};break;case"middle":i=function(t,e,n,i,o){return i<=e&&e<=o};break;case"top-only":i=function(t,e,n,i,o){return t<=i&&i<=n};break;case"bottom-only":i=function(t,e,n,i,o){return o<=n&&t<=o};break;default:case"default":i=function(t,e,n,i,o){return i<=n&&t<=o}}return o={id:e,options:n,test:i,handler:function(t){var e,n,i,o,l,s,r,a=this.state,u=this.$element.offset();n=t+(e=c.height())/2,i=t+e,o=this.$element.outerHeight(),l=u.top+h(this.options.top,o,e),s=u.top+o-h(this.options.bottom,o,e),(r=this.test(t,n,i,l,s))!=a&&((this.state=r)?this.options.enter&&this.options.enter.apply(this.element):this.options.leave&&this.options.leave.apply(this.element)),this.options.scroll&&this.options.scroll.apply(this.element,[(n-l)/(s-l)])},state:null,element:this,$element:l,timeoutId:null},u[e]=o,l.data("_scrollexId",o.id),o.options.initialize&&o.options.initialize.apply(this),l},jQuery.fn.unscrollex=function(){var t,e,n=r(this);if(0==this.length)return n;if(1<this.length){for(var i=0;i<this.length;i++)r(this[i]).unscrollex();return n}return(t=n.data("_scrollexId"))&&(e=u[t],window.clearTimeout(e.timeoutId),delete u[t],n.removeData("_scrollexId"),e.options.terminate&&e.options.terminate.apply(this)),n}}(jQuery);